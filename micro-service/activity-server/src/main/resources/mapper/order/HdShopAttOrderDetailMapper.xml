<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ly.mt.activity.server.order.mapper.HdShopAttOrderDetailMapper" >
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, order_id, user_id, shop_att_detail_id, goods_sku_id, goods_spu_id, goods_quantity, 
    goods_price, create_time, uodate_time,front_category_id
  </sql>
  <select id="selectByPrimaryKey"  parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from hd_shop_att_order_detail
    where id = #{id}
  </select>

    <!--查询商品详情信息-->
    <select id="findDetailsByOrders" resultType="com.ly.mt.core.common.entity.hd.model.HdShopOrderDetailGoodsModel">
       select dspu.* ,gski.`name` goods_sku_name from
		(SELECT aod.*,gsi.`name` goods_spu_name ,gsi.`picture_url` picduce_url FROM
					hd_shop_att_order_detail aod,goods_spu_info gsi
							WHERE aod.order_id IN
                              <foreach collection="orderIds" item="item" index="index"
                                       open="(" close=")" separator=",">
                                #{item}
                              </foreach>
							AND aod.goods_spu_id = gsi.id)  dspu, goods_sku_info gski
	  WHERE dspu.goods_sku_id = gski.id
    </select>
  <!--查询front_category表重的商品信息-->
  <select id="findDetailFrontByOrders"
          resultType="com.ly.mt.core.common.entity.hd.model.HdShopOrderDetailGoodsModel">
    	 select dspu.* ,gski.`name` goods_sku_name from
		(SELECT aod.*,fc.`name` goods_spu_name ,fc.`picture_url` picduce_url FROM
					hd_shop_att_order_detail aod,front_category fc
							WHERE aod.order_id IN
                              <foreach collection="orderIds" item="item" index="index"
                                       open="(" close=")" separator=",">
                                #{item}
                              </foreach>
							AND aod.front_category_id  = fc.id) dspu, goods_sku_info gski
	  WHERE dspu.goods_sku_id = gski.id;
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from hd_shop_att_order_detail
    where id = #{id}
  </delete>
  <insert id="insert" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrderDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into hd_shop_att_order_detail (id, order_id, user_id, 
      shop_att_detail_id, goods_sku_id, goods_spu_id, 
      goods_quantity, goods_price, create_time, 
      uodate_time,front_category_id)
    values (#{id}, #{orderId}, #{userId},
      #{shopAttDetailId}, #{goodsSkuId}, #{goodsSpuId},
      #{goodsQuantity}, #{goodsPrice}, #{createTime},
      #{uodateTime},#{frontCategoryId})
  </insert>
  <insert id="insertSelective" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrderDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into hd_shop_att_order_detail
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="orderId != null" >
        order_id,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
      <if test="shopAttDetailId != null" >
        shop_att_detail_id,
      </if>
      <if test="goodsSkuId != null" >
        goods_sku_id,
      </if>
      <if test="goodsSpuId != null" >
        goods_spu_id,
      </if>
      <if test="goodsQuantity != null" >
        goods_quantity,
      </if>
      <if test="goodsPrice != null" >
        goods_price,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="uodateTime != null" >
        uodate_time,
      </if>
      <if test="frontCategoryId != null">
        front_category_id,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id},
      </if>
      <if test="orderId != null" >
        #{orderId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        #{userId},
      </if>
      <if test="shopAttDetailId != null" >
        #{shopAttDetailId},
      </if>
      <if test="goodsSkuId != null" >
        #{goodsSkuId},
      </if>
      <if test="goodsSpuId != null" >
        #{goodsSpuId},
      </if>
      <if test="goodsQuantity != null" >
        #{goodsQuantity},
      </if>
      <if test="goodsPrice != null" >
        #{goodsPrice,jdbcType=DECIMAL},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="uodateTime != null" >
        #{uodateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="frontCategoryId != null">
        #{frontCategoryId}
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrderDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update hd_shop_att_order_detail
    <set >
      <if test="orderId != null" >
        order_id = #{orderId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        user_id = #{userId},
      </if>
      <if test="shopAttDetailId != null" >
        shop_att_detail_id = #{shopAttDetailId},
      </if>
      <if test="goodsSkuId != null" >
        goods_sku_id = #{goodsSkuId},
      </if>
      <if test="goodsSpuId != null" >
        goods_spu_id = #{goodsSpuId},
      </if>
      <if test="goodsQuantity != null" >
        goods_quantity = #{goodsQuantity},
      </if>
      <if test="goodsPrice != null" >
        goods_price = #{goodsPrice,jdbcType=DECIMAL},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="uodateTime != null" >
        uodate_time = #{uodateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="frontCategoryId != null">
        front_category_id = #{frontCategoryId}
      </if>
    </set>
    where id = #{id}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrderDetail" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update hd_shop_att_order_detail
    set order_id = #{orderId,jdbcType=VARCHAR},
      user_id = #{userId},
      shop_att_detail_id = #{shopAttDetailId},
      goods_sku_id = #{goodsSkuId},
      goods_spu_id = #{goodsSpuId},
      goods_quantity = #{goodsQuantity},
      goods_price = #{goodsPrice,jdbcType=DECIMAL},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      uodate_time = #{uodateTime,jdbcType=TIMESTAMP},
      front_category_id = #{frontCategoryId}
    where id = #{id}
  </update>
</mapper>