<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ly.mt.activity.server.order.mapper.HdShopAttOrderMapper" >
  <sql id="Base_Column_List" >
    id, order_id, user_id, shop_att_detail_id, shop_id, total_price, order_status, shipping_address, 
    user_address_id, get_goods_code, create_time, update_time, order_type
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" >

    select 
    <include refid="Base_Column_List" />
    from hd_shop_att_order
    where id = #{id}
  </select>
  <!--单表条件查询-->
  <select id="searchConditions" resultType="java.util.Map">
      select * from
      hd_shop_att_order
      <if test="condition != null and condition.size >0">
        <where>
          <foreach collection="condition.entrySet()"  item="value" index="key">
            <if test="key != null">
              AND  ${key} like concat('%',#{value},'%')
            </if>
          </foreach>
        </where>
      </if>
  </select>
    <!--分页条件查询-->
    <select id="pageConditions" resultType="com.ly.mt.core.common.entity.hd.HdShopAttOrder">
      SELECT * FROM
          hd_shop_att_order
          WHERE 1=1
          <if test="conditions != null">
            <if test="conditions.phone != null  and conditions.phone !=''">
             and user_id = (
              SELECT id from hd_activity_user WHERE phone = #{conditions.phone}
              )
            </if>
            <if test="conditions.orderStatus != null and conditions.orderStatus != '' ">
              and order_status = #{conditions.orderStatus}
            </if>
          </if>
             and shop_att_detail_id = #{hdShopAttDetailVo.id}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from hd_shop_att_order
    where id = #{id}
  </delete>
  <insert id="insert" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrder" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into hd_shop_att_order (id, order_id, user_id, 
      shop_att_detail_id, shop_id, total_price, 
      order_status, shipping_address, user_address_id, 
      get_goods_code, create_time, update_time, 
      order_type)
    values (#{id}, #{orderId}, #{userId},
      #{shopAttDetailId}, #{shopId}, #{totalPrice},
      #{orderStatus}, #{shippingAddress}, #{userAddressId},
      #{getGoodsCode}, #{createTime}, #{updateTime},
      #{orderType})
  </insert>
  <insert id="insertSelective" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrder" >
    insert into hd_shop_att_order
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="orderId != null" >
        order_id,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
      <if test="shopAttDetailId != null" >
        shop_att_detail_id,
      </if>
      <if test="shopId != null" >
        shop_id,
      </if>
      <if test="totalPrice != null" >
        total_price,
      </if>
      <if test="orderStatus != null" >
        order_status,
      </if>
      <if test="shippingAddress != null" >
        shipping_address,
      </if>
      <if test="userAddressId != null" >
        user_address_id,
      </if>
      <if test="getGoodsCode != null" >
        get_goods_code,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="orderType != null" >
        order_type,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id},
      </if>
      <if test="orderId != null" >
        #{orderId},
      </if>
      <if test="userId != null" >
        #{userId},
      </if>
      <if test="shopAttDetailId != null" >
        #{shopAttDetailId},
      </if>
      <if test="shopId != null" >
        #{shopId},
      </if>
      <if test="totalPrice != null" >
        #{totalPrice},
      </if>
      <if test="orderStatus != null" >
        #{orderStatus},
      </if>
      <if test="shippingAddress != null" >
        #{shippingAddress},
      </if>
      <if test="userAddressId != null" >
        #{userAddressId},
      </if>
      <if test="getGoodsCode != null" >
        #{getGoodsCode},
      </if>
      <if test="createTime != null" >
        #{createTime},
      </if>
      <if test="updateTime != null" >
        #{updateTime},
      </if>
      <if test="orderType != null" >
        #{orderType},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrder" >
    update hd_shop_att_order
    <set >
      <if test="orderId != null" >
        order_id = #{orderId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        user_id = #{userId},
      </if>
      <if test="shopAttDetailId != null" >
        shop_att_detail_id = #{shopAttDetailId},
      </if>
      <if test="shopId != null" >
        shop_id = #{shopId},
      </if>
      <if test="totalPrice != null" >
        total_price = #{totalPrice,jdbcType=DECIMAL},
      </if>
      <if test="orderStatus != null" >
        order_status = #{orderStatus,jdbcType=VARCHAR},
      </if>
      <if test="shippingAddress != null" >
        shipping_address = #{shippingAddress,jdbcType=VARCHAR},
      </if>
      <if test="userAddressId != null" >
        user_address_id = #{userAddressId},
      </if>
      <if test="getGoodsCode != null" >
        get_goods_code = #{getGoodsCode,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="orderType != null" >
        order_type = #{orderType,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ly.mt.core.common.entity.hd.HdShopAttOrder" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update hd_shop_att_order
    set order_id = #{orderId,jdbcType=VARCHAR},
      user_id = #{userId},
      shop_att_detail_id = #{shopAttDetailId},
      shop_id = #{shopId},
      total_price = #{totalPrice,jdbcType=DECIMAL},
      order_status = #{orderStatus,jdbcType=VARCHAR},
      shipping_address = #{shippingAddress,jdbcType=VARCHAR},
      user_address_id = #{userAddressId},
      get_goods_code = #{getGoodsCode,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      order_type = #{orderType,jdbcType=VARCHAR}
    where id = #{id}
  </update>
  <update id="shopChangeStatus">
    update hd_shop_att_order set
        order_status = #{orderStatus}
        where order_id = #{orderId}
      <if test=" getProuctCode != null and getProuctCode != ''">
         and get_goods_code = #{getProuctCode}
      </if>
  </update>
</mapper>